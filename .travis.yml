sudo: required
language: python
python:
- '3.6'
env:
  global:
  - DOCKER_COMPOSE_VERSION: 1.26.0
services:
- docker
before_install:
- sudo rm /usr/local/bin/docker-compose
- curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname
  -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
- docker-compose --version
install:
- docker build -t odootest_runner .
- docker-compose up -d
- docker ps
script:
- make run_tests
after_script:
- docker-compose stop
notifications:
  email:
    recipients:
    - olivier.simon@youritfactory.com
    on_success: change
    on_failure: always
  slack:
    rooms:
      secure: jrBE1K/eCJXh3dL0xYwZ75ZCO72cAhhFxFdd312sClomQDr5jwuYTHs23arGFmgcN0CRs0EXf2SorSGNUqj/3xhA6GWOIf3kjKmSv7IuxqqtBj3rtSQ26xwoPXnyBsiEzMhi/lsRTjpIjXrtHON28CYuJ80ScOOt/WD0udTJCPTFdDxiCQPWaCMpfxM+YCJ7aKfzCB9c1V6UakrGgxs3Wv+6fBLO+X2mv/hIF51BtB8kDUII2ZvqOd9B7rCtk9EThqNrVQibtDdtk/v0oHQvfnp4zzNOH6KJ6LZ3A/Hzkk5gzVz02rwX4UcmFxgzYdQYgnGBNiIwS8kwc8oHazjTbV/e0iCbntgaAwZO+GSG/5C98IejJBrjb+6/OaHRSWsoGgi4CUy4AX6T88MQY7rCdogP5wlHCBGLhGLzYKoX2axVWm8WAaEbqB05sps/wC957Q/J1VK2s9H1k4V7n0nAYcxsQDiXiAmHT/1A6cpGFOuXZ/EMmZ29ko73X0YRfs82XThIcIWG0uFRB3sjKdHD7OxA60uTSqRPy4a7zme6StWLMysv5NWtPR8IMKHBwyNWrYg4DUiENhcuMQgz6IDXjsvCNTOhDrVlI6aH+NdUStthmiAzXa6hCb71+/Y/d9FEN7bazMzV+Y2es1/ZGHPIG2e33gtBWHiv6R4upnuF10c=
    on_success: always
    on_failure: always
